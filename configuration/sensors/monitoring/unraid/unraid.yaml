

## UnRAID Version Sensor URLs
# Stable URL: https://s3.amazonaws.com/dnld.lime-technology.com/stable/unRAIDServer.plg
# Beta URL: https://s3.amazonaws.com/dnld.lime-technology.com/next/unRAIDServer.plg

- platform: command_line
  name: Unraid Version (Next)
  command: /usr/bin/curl --insecure "https://s3.amazonaws.com/dnld.lime-technology.com/next/unRAIDServer.plg" 2>&1 | grep Version |awk '{print $3}'

## API sensors

- platform: template
  sensors:
    unraid_array_status:
      friendly_name: UnRAID Array Status
      value_template: '{{state_attr("binary_sensor.chsunr01_server", "arrayStatus")}}'

    unraid_array_protection:
      friendly_name: UnRAID Array Protection
      value_template: '{{state_attr("binary_sensor.chsunr01_server", "arrayProtection")}}'

    unraid_array_space:
      friendly_name: UnRAID Array Space
      value_template: >
        {{ state_attr("binary_sensor.chsunr01_server", "diskSpace")
          | regex_findall_index(".*\((\d+.?\d+) %\)") | float }}
      unit_of_measurement: '%'

# SNMP Sensors

## HDD SNMP Temperatures

- platform: snmp
  name: 'UnRAID PARITY Temperature'
  host: !secret server_ip_address_vlan20
  port: 161
  community: public
  baseoid: 1.3.6.1.4.1.8072.1.3.2.4.1.2.8.100.105.115.107.116.101.109.112.1
  accept_errors: true
  value_template: >
     {{ value | regex_findall_index("(\d+)$") }}
  unit_of_measurement: '°C'

- platform: snmp
  name: 'UnRAID DISK1 Temperature'
  host: !secret server_ip_address_vlan20
  port: 161
  community: public
  baseoid: 1.3.6.1.4.1.8072.1.3.2.4.1.2.8.100.105.115.107.116.101.109.112.2
  accept_errors: true
  value_template: >
     {{ value | regex_findall_index("(\d+)$") }}
  unit_of_measurement: '°C'

- platform: snmp
  name: 'UnRAID DISK2 Temperature'
  host: !secret server_ip_address_vlan20
  port: 161
  community: public
  baseoid: 1.3.6.1.4.1.8072.1.3.2.4.1.2.8.100.105.115.107.116.101.109.112.3
  accept_errors: true
  value_template: >
     {{ value | regex_findall_index("(\d+)$") }}
  unit_of_measurement: '°C'

- platform: snmp
  name: 'UnRAID DISK3 Temperature'
  host: !secret server_ip_address_vlan20
  port: 161
  community: public
  baseoid: 1.3.6.1.4.1.8072.1.3.2.4.1.2.8.100.105.115.107.116.101.109.112.4
  accept_errors: true
  value_template: >
     {{ value | regex_findall_index("(\d+)$") }}
  unit_of_measurement: '°C'

- platform: snmp
  name: 'UnRAID DISK4 Temperature'
  host: !secret server_ip_address_vlan20
  port: 161
  community: public
  baseoid: 1.3.6.1.4.1.8072.1.3.2.4.1.2.8.100.105.115.107.116.101.109.112.5
  accept_errors: true
  value_template: >
     {{ value | regex_findall_index("(\d+)$") }}
  unit_of_measurement: '°C'

- platform: snmp
  name: 'UnRAID DISK5 Temperature'
  host: !secret server_ip_address_vlan20
  port: 161
  community: public
  baseoid: 1.3.6.1.4.1.8072.1.3.2.4.1.2.8.100.105.115.107.116.101.109.112.6
  accept_errors: true
  value_template: >
     {{ value | regex_findall_index("(\d+)$") }}
  unit_of_measurement: '°C'

- platform: snmp
  name: 'UnRAID DISK6 Temperature'
  host: !secret server_ip_address_vlan20
  port: 161
  community: public
  baseoid: 1.3.6.1.4.1.8072.1.3.2.4.1.2.8.100.105.115.107.116.101.109.112.7
  accept_errors: true
  value_template: >
     {{ value | regex_findall_index("(\d+)$") }}
  unit_of_measurement: '°C'

